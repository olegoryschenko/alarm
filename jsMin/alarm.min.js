import{createModal as e}from"./modal.min.js";import{closedModal as t}from"./modal.min.js";let createMusicAlarm=e=>{let t=document.createElement("audio");t.setAttribute("id","myAudio"),t.setAttribute("src",`${e}`),document.querySelector(".block__audio").appendChild(t)};createMusicAlarm("./sounds/ringtone-126505.mp3");let audioAlarm=document.getElementById("myAudio"),allAlarmBlock=document.querySelectorAll(".alarm__block"),allDivsAreInactive=!0,timerInterval,startNewAlarm=()=>{let l=!1;window.addEventListener("click",function(r){document.querySelectorAll(".checkAlarmInput").forEach(r=>{let a=event.target.closest(".alarm__block");if(this.event.target===r){if(r.checked){a.classList.add("active"),l=!0;let s=this.event.target.dataset.titles,o={width:200,title:"TIMER",buttonText:""},c={element:"img",src:"./img/alarmIcon.png",classes:"shake-rotate shake-constant shake-constant--hover"};timerInterval&&this.clearInterval(timerInterval),l&&(timerInterval=setInterval(()=>{let l=new Date,r=l.getSeconds().toString().padStart(2,"0");console.log(r);l.getHours().toString().padStart(2,"0")+":"+l.getMinutes().toString().padStart(2,"0")==s&&(playedAlarm(),audioAlarm.loop=!0,clearInterval(timerInterval),e(o.width,o.title,o.buttonText),this.document.querySelector(".footer__app").setAttribute("style","z-index: -1"),this.document.querySelector(".modal__btn-footer-close").setAttribute("style","display: none;"),this.document.querySelector(".timeForAlarm").classList.add("none"),this.document.querySelector("#inputTimeAlarm").setAttribute("class","none"),createElementModalBody(c.element,c.src,c.classes),setTimeout(()=>{document.querySelector(".modal").classList.add("open"),document.querySelector(".modal__background").classList.add("open")},500),t())},1e3))}else a.classList.remove("active"),allDivsAreInactive&&this.clearInterval(timerInterval)}})})},playedAlarm=()=>{audioAlarm.play()};export const stoppedAlarm=()=>{audioAlarm.pause()};let createElementModalBody=(e,t,l)=>{let r=document.createElement(e);r.setAttribute("src",`${t}`),r.setAttribute("class",`${l}`),document.querySelector(".modal__block-content").appendChild(r)};startNewAlarm();let intervalCliked,buttonAddAlarm=document.querySelector(".footer__add-alarm"),headerTitle=document.querySelector(".header__app-title"),howmuchDeltes=document.querySelector(".howmuchDeltes"),createDeleteButton=document.createElement("button"),startInterval=!0;window.addEventListener("mousedown",e=>{e.target.dataset.elements&&(timerInterval&&clearInterval(timerInterval),document.querySelectorAll(".alarm__block").forEach(e=>{e.classList.remove("active")}),document.querySelectorAll(".checkAlarmInput").forEach(e=>{e.checked=!1}),allDivsAreInactive&&clearInterval(timerInterval),startInterval&&(intervalCliked=setInterval(()=>{allDivsAreInactive=!1;let e=document.querySelectorAll(".checkAlarmInput"),t=document.querySelectorAll(".slider");e.forEach(e=>{e.setAttribute("class","delete")}),t.forEach(e=>{e.setAttribute("style","display: none")}),buttonAddAlarm.setAttribute("disabled",""),document.querySelector(".header__app-dots").setAttribute("style","display: none;"),createDeleteButton.classList.add("deletesAlarm"),document.querySelector(".header__app").appendChild(createDeleteButton),createDeleteButton.innerHTML=`
                <?xml version="1.0" encoding="iso-8859-1"?>
    <!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
    <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
    <svg fill="var(--colorIconButtonDelete)" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
         width="20px" height="20px" viewBox="0 0 408.483 408.483"
         xml:space="preserve">
    <g>
        <g>
            <path d="M87.748,388.784c0.461,11.01,9.521,19.699,20.539,19.699h191.911c11.018,0,20.078-8.689,20.539-19.699l13.705-289.316
                H74.043L87.748,388.784z M247.655,171.329c0-4.61,3.738-8.349,8.35-8.349h13.355c4.609,0,8.35,3.738,8.35,8.349v165.293
                c0,4.611-3.738,8.349-8.35,8.349h-13.355c-4.61,0-8.35-3.736-8.35-8.349V171.329z M189.216,171.329
                c0-4.61,3.738-8.349,8.349-8.349h13.355c4.609,0,8.349,3.738,8.349,8.349v165.293c0,4.611-3.737,8.349-8.349,8.349h-13.355
                c-4.61,0-8.349-3.736-8.349-8.349V171.329L189.216,171.329z M130.775,171.329c0-4.61,3.738-8.349,8.349-8.349h13.356
                c4.61,0,8.349,3.738,8.349,8.349v165.293c0,4.611-3.738,8.349-8.349,8.349h-13.356c-4.61,0-8.349-3.736-8.349-8.349V171.329z"/>
            <path d="M343.567,21.043h-88.535V4.305c0-2.377-1.927-4.305-4.305-4.305h-92.971c-2.377,0-4.304,1.928-4.304,4.305v16.737H64.916
                c-7.125,0-12.9,5.776-12.9,12.901V74.47h304.451V33.944C356.467,26.819,350.692,21.043,343.567,21.043z"/>
        </g>
    </g>
    </svg>
                `,headerTitle.innerHTML=`
                    <svg width="50" height="50" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M22.6066 21.3934C22.2161 21.0029 21.5829 21.0029 21.1924 21.3934C20.8019 21.7839 20.8019 22.4171 21.1924 22.8076L22.6066 21.3934ZM40.9914 42.6066C41.3819 42.9971 42.0151 42.9971 42.4056 42.6066C42.7961 42.2161 42.7961 41.5829 42.4056 41.1924L40.9914 42.6066ZM21.1924 41.1924C20.8019 41.5829 20.8019 42.2161 21.1924 42.6066C21.5829 42.9971 22.2161 42.9971 22.6066 42.6066L21.1924 41.1924ZM42.4056 22.8076C42.7961 22.4171 42.7961 21.7839 42.4056 21.3934C42.0151 21.0029 41.3819 21.0029 40.9914 21.3934L42.4056 22.8076ZM21.1924 22.8076L40.9914 42.6066L42.4056 41.1924L22.6066 21.3934L21.1924 22.8076ZM22.6066 42.6066L42.4056 22.8076L40.9914 21.3934L21.1924 41.1924L22.6066 42.6066Z" fill="var(--colorIconButtonDelete)"/>
                    </svg>
                `,headerTitle.setAttribute("class","closeDelete"),headerTitle.classList.add("barrelRoll"),howmuchDeltes.classList.add("show")},500)))});let howmuchDeltesNumber;window.addEventListener("mouseup",e=>{document.querySelector(".delete")&&allAlarmBlock.forEach(e=>{e.setAttribute("disabled","")}),e.target.dataset.elements&&(clearInterval(intervalCliked),startInterval=!1,document.querySelector(".closeDelete")&&document.querySelector(".closeDelete").addEventListener("click",()=>{defaulClasses(),howmuchDeltes.innerHTML="0",document.querySelectorAll(".checkAlarmInput").forEach(e=>{e.checked=!1}),startInterval=!0}))}),window.addEventListener("change",e=>{let t=e.target.closest(".delete"),l=document.querySelector(".deletesAlarm"),r=e.target.closest(".alarm__block"),a=e.target.closest(".alarm__block");howmuchDeltesNumber=document.querySelectorAll(".delete:checked").length,howmuchDeltes.innerHTML=howmuchDeltesNumber,t&&(t.checked?r.classList.add("deletes"):r.classList.remove("deletes")),l&&l.addEventListener("click",()=>{startInterval=!0,r.classList.contains("deletes")&&(createMusicAlarm("./sounds/ringtone-126505.mp3"),defaulClasses(),howmuchDeltes.innerHTML="0",a.classList.add("barrelRoll"),setTimeout(()=>{a.remove()},400),document.querySelectorAll(".checkAlarmInput").forEach(e=>{e.checked=!1}))})});let defaulClasses=()=>{intervalCliked=!1;let e=document.querySelector(".deletesAlarm");e&&e.remove();let t=document.querySelectorAll(".delete"),l=document.querySelectorAll(".slider");t.forEach(e=>{e.setAttribute("class","checkAlarmInput")}),l.forEach(e=>{e.removeAttribute("style","display: none")}),l.checked=!1,document.querySelector(".header__app-dots").removeAttribute("style","display: none;"),buttonAddAlarm.removeAttribute("disabled",""),headerTitle.setAttribute("class","header__app-title"),headerTitle.innerHTML="Alarm",howmuchDeltes.classList.remove("show")};